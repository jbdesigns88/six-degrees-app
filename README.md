# Six Degrees â€“ The Movie Connection Game

This is a full-stack, real-time multiplayer version of the classic "Six Degrees of Separation" game, built with React, Node.js, Socket.IO, and Supabase.

## Features

- **Solo Mode**: Practice and hone your skills against the clock.
- **Real-Time Online Mode**: Create a challenge link and play against a friend in real-time.
- **Persistent Profiles**: Usernames and ratings are saved to a database.
- **ELO Rating System**: Your rating adjusts based on match outcomes and opponent strength.
- **Global Leaderboard**: See how you stack up against other players.
- **Dynamic Content**: Game content is generated by the Gemini API and sourced from The Movie Database (TMDB).

## Tech Stack

- **Frontend**: React, TypeScript, Tailwind CSS
- **Backend**: Node.js, Express
- **Real-Time**: Socket.IO
- **Database**: Supabase (PostgreSQL)
- **Generative AI**: Google Gemini API
- **Movie Data**: TMDB API

---

## 1. Setup Instructions

### Prerequisites
- Node.js and npm installed on your machine.
- A Google AI Studio API Key.
- A TMDB API Access Token.

### Step 1: Supabase Database Setup

1.  **Create a Supabase Project**: Go to [supabase.com](https://supabase.com/), sign up, and create a new project.
2.  **Create and Secure Profiles Table**:
    -   In your Supabase project, go to the **SQL Editor**.
    -   Click **+ New query**.
    -   Copy and paste the entire script below into the query window and click **RUN**. This script creates the `profiles` table and enables Row Level Security with permissive policies that allow the application server to function correctly.

    ```sql
    -- 1. Create the profiles table to store user data
    CREATE TABLE public.profiles (
      id uuid NOT NULL DEFAULT gen_random_uuid(),
      username text NOT NULL,
      rating integer NOT NULL DEFAULT 1000,
      created_at timestamp with time zone NOT NULL DEFAULT now(),
      CONSTRAINT profiles_pkey PRIMARY KEY (id),
      CONSTRAINT profiles_username_key UNIQUE (username)
    );

    -- 2. Enable Row Level Security (RLS) for the table
    ALTER TABLE public.profiles ENABLE ROW LEVEL SECURITY;

    -- 3. Create permissive policies to allow server-side operations.
    --    This setup is designed for functionality. You can tighten these rules later.

    -- POLICY: Allow anyone to read all profiles (needed for the leaderboard).
    CREATE POLICY "Public profiles are viewable by everyone."
    ON public.profiles FOR SELECT
    USING (true);

    -- POLICY: Allow anyone to create a profile (needed for new user registration).
    CREATE POLICY "Anyone can create a profile."
    ON public.profiles FOR INSERT
    WITH CHECK (true);

    -- POLICY: Allow anyone to update profiles (needed for rating changes).
    CREATE POLICY "Anyone can update profiles."
    ON public.profiles FOR UPDATE
    USING (true);
    ```
3.  **Get Supabase Credentials**:
    -   Go to **Project Settings** (the gear icon).
    -   Click on **API**.
    -   Under **Project URL**, copy the URL.
    -   Under **Project API Keys**, copy the `anon` **public** key.

### Step 2: Backend Configuration

1.  **Locate the `.env` file**: In the project, there is a file located at `server/.env`. If it doesn't exist, create it.
2.  **Edit the file**: Open `server/.env` and add your Supabase credentials. **Replace the placeholder values** with the actual credentials you copied from your Supabase project.

    ```env
    # Replace with your actual Supabase Project URL
    SUPABASE_PROJECT_URL=YOUR_SUPABASE_URL

    # Replace with your actual Supabase Anon (public) Key
    SUPABASE_API_KEY=YOUR_SUPABASE_ANON_KEY
    ```

### Step 3: Install Dependencies

Open your terminal in the root directory of the project and run:
```bash
npm install
```
This will install all the necessary packages for both the server and the client.

---

## 2. Running the Application

### Step 1: Start the Server

In your terminal, from the root directory of the project, run:
```bash
npm run server
```
You should see output indicating that the server is running, for example: `Server listening on port 3001`. This single command starts the backend and also serves the frontend application.

### Step 2: Play the Game

1.  Open your web browser (e.g., Chrome, Firefox).
2.  Navigate to the following address:
    
    **http://localhost:3001**

**IMPORTANT:** You **must** access the game via the `localhost:3001` URL. Do **not** open the `index.html` file directly from your file system (`file://...`). The application will not work if you open the file directly, as the frontend will be unable to communicate with the backend server.